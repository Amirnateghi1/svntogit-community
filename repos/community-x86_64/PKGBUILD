# Maintainer: Alad Wenter <alad (at) mailbox.org>
# Contributor: Chris Brannon <cmbrannon (at) cox.net>
# Contributor: joyfulgirl <joyfulgirl (at) archlinux.us>
# Contributor: Chuck Boucher <jofywyxaxukyvofa (at) tempomail.fr>
# Contributor: aksr <aksr at t-com dot me>

pkgname=edbrowse
pkgver=3.7.4
pkgrel=1
pkgdesc='Line-oriented editor, browser and mail client'
arch=('x86_64')
url="http://edbrowse.org/"
license=('GPL' 'MPL')
depends=('duktape' 'tidy' 'curl' 'pcre')
source=("$pkgname-$pkgver.tar.gz::https://github.com/CMB/edbrowse/archive/v$pkgver.tar.gz")
source=("$pkgname-$pkgver.tar.gz::https://github.com/CMB/edbrowse/archive/v$pkgver.tar.gz"
        curl-7.62.patch)
sha256sums=('ae7717c4c30297a01185ae2705fd55a7cd5f5484db05d5dfc02b7932b5766498'
            'b4eff80c296d5d1531255f3b0b9337efee06e070c4c7d92569517d853805bae7')

prepare() {
    cd "$pkgname-$pkgver"
    patch -Np1 -i ../curl-7.62.patch
}

build() {
    cd "$pkgname-$pkgver"
    make CFLAGS="-I/usr/include/tidy" all
}

package() {
    cd "$pkgname-$pkgver"
    make -C src DESTDIR="$pkgdir" prefix=/usr install

    install -Dm644 README CHANGES -t "$pkgdir/usr/share/doc/$pkgname/README"
    install -Dm644 COPYING -t "$pkgdir/usr/share/licenses/$pkgname"
    install -Dm644 doc/usersguide.html doc/sample.ebrc -t "$pkgdir/usr/share/doc/edbrowse"
    install -Dm644 doc/man-edbrowse-debian.1 -T "$pkgdir/usr/share/man/man1/edbrowse.1"
}

